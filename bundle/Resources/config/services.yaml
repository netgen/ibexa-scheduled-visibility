parameters:
    netgen_ibexa_scheduled_visibility.enabled: false
    netgen_ibexa_scheduled_visibility.strategy: 'location'
    netgen_ibexa_scheduled_visibility.content_types.all: false
    netgen_ibexa_scheduled_visibility.content_types.allowed: []
    netgen_ibexa_scheduled_visibility.sections.hidden.section_id: 0
    netgen_ibexa_scheduled_visibility.sections.visible.section_id: 0
    netgen_ibexa_scheduled_visibility.object_states.object_state_group_id: 0
    netgen_ibexa_scheduled_visibility.object_states.hidden.object_state_id: 0
    netgen_ibexa_scheduled_visibility.object_states.visible.object_state_id: 0

services:
    Netgen\Bundle\IbexaScheduledVisibilityBundle\EventListener\ScheduledVisibilityListener:
        arguments:
            - '@Netgen\Bundle\IbexaScheduledVisibilityBundle\Service\ScheduledVisibilityService'
        tags:
            - { name: kernel.event_subscriber }

    _instanceof:
        Netgen\Bundle\IbexaScheduledVisibilityBundle\ScheduledVisibility\ScheduledVisibilityInterface:
            tags: [ 'scheduled_visibility_strategy' ]

    Netgen\Bundle\IbexaScheduledVisibilityBundle\Service\ScheduledVisibilityService:
        arguments:
            - !tagged_iterator { tag: 'scheduled_visibility_strategy' }
            - '%netgen_ibexa_scheduled_visibility.strategy%'
            - '%netgen_ibexa_scheduled_visibility.enabled%'
            - '%netgen_ibexa_scheduled_visibility.content_types.all%'
            - '%netgen_ibexa_scheduled_visibility.content_types.allowed%'

    Netgen\Bundle\IbexaScheduledVisibilityBundle\ScheduledVisibility\Strategy\Location:
        arguments:
            - '@ibexa.api.repository'
            - '@ibexa.api.service.content'
            - '@ibexa.api.service.location'
            - '@?logger'
        tags:
            - { name: monolog.logger, channel: ngscheduledvisibility }

    Netgen\Bundle\IbexaScheduledVisibilityBundle\ScheduledVisibility\Strategy\Section:
        arguments:
            - '@ibexa.api.repository'
            - '@ibexa.api.service.section'
            - '%netgen_ibexa_scheduled_visibility.sections.hidden.section_id%'
            - '%netgen_ibexa_scheduled_visibility.sections.visible.section_id%'
            - '@?logger'
        tags:
            - { name: monolog.logger, channel: ngscheduledvisibility }

    Netgen\Bundle\IbexaScheduledVisibilityBundle\ScheduledVisibility\Strategy\ObjectState:
        arguments:
            - '@ibexa.api.repository'
            - '@ibexa.api.service.object_state'
            - '%netgen_ibexa_scheduled_visibility.object_states.object_state_group_id%'
            - '%netgen_ibexa_scheduled_visibility.object_states.hidden.object_state_id%'
            - '%netgen_ibexa_scheduled_visibility.object_states.visible.object_state_id%'
            - '@?logger'
        tags:
            - { name: monolog.logger, channel: ngscheduledvisibility }

    Netgen\Bundle\IbexaScheduledVisibilityBundle\Command\ToggleContentVisibilityCommand:
        arguments:
            - '@ibexa.api.repository'
            - '@Netgen\Bundle\IbexaScheduledVisibilityBundle\Service\ScheduledVisibilityService'
            - '%netgen_ibexa_scheduled_visibility.enabled%'
            - '%netgen_ibexa_scheduled_visibility.content_types.all%'
            - '%netgen_ibexa_scheduled_visibility.content_types.allowed%'
        tags:
            - { name: console.command, command: 'ngscheduledvisibility:content:toggle-visibility' }
